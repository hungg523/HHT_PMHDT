<!DOCTYPE html>
<html lang="en">

<head>
  <title>Nhà thuốc &mdash; Trang chủ</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap&subset=vietnamese">
  <link rel="icon" href="/assets/images/logo.png" type="image/x-icon">
  <link rel="stylesheet" href="/assets/fonts/icomoon/style.css">
  <link rel="stylesheet" href="/assets/css/bootstrap.min.css">
  <link rel="stylesheet" href="/assets/css/magnific-popup.css">
  <link rel="stylesheet" href="/assets/css/jquery-ui.css">
  <link rel="stylesheet" href="/assets/css/owl.carousel.min.css">
  <link rel="stylesheet" href="/assets/css/owl.theme.default.min.css">


  <link rel="stylesheet" href="/assets/css/aos.css">
  <link rel="stylesheet" href="/assets/css/popup.css">
  <link rel="stylesheet" href="/assets/css/style.css">

</head>

<body>
  <!-- Navbar -->
  <div class="site-wrap">
    <div class="site-navbar py-2">

      <div class="search-wrap">
        <div class="container">
          <a href="#" class="search-close js-search-close"><span class="icon-close2"></span></a>
          <form action="#" method="post">
            <input type="text" class="form-control" placeholder="Nhập sản phẩm cần tìm...">
          </form>
        </div>
      </div>

      <div class="container">
        <div class="d-flex align-items-center justify-content-between">
          <div class="logo">
            <div class="site-logo">
              <a href="/index.html" class="js-logo-clone">HHT <span style="color: #5eba24;">Pharmacy</span></a>
            </div>
          </div>

          <div class="main-nav d-none d-lg-block">
            <nav class="site-navigation text-right text-md-center" role="navigation">
              <ul class="site-menu js-clone-nav d-none d-lg-block">
                <li class="active"><a href="index.html"><strong>Trang chủ</strong></a></li>
                <li class="has-children">
                  <a href="#"><strong>Danh mục</strong></a>
                  <ul class="dropdown" id="categoryList">
                    <!-- Danh mục hiển thị từ API -->
                  </ul>
                </li>
                <li><a href="/pages/shop.html"><strong>Sản phẩm</strong></a></li>
                <li><a href="/pages/about.html"><strong>Về chúng tôi</strong></a></li>
                <li><a href="/pages/contact.html"><strong>Liên hệ</strong></a></li>
              </ul>
            </nav>
          </div>

          <div class="icons">
            <!-- Link mở popup Đăng nhập và Đăng ký -->
            <div class="icons" id="accountSection">
              <!-- Nội dung sẽ được JavaScript cập nhật -->
              <a href="#" class="icons-btn d-inline-block js-search-open"><span class="icon-search"></span></a>
              <a href="cart.html" class="icons-btn d-inline-block bag">
                <span class="icon-shopping-bag"></span>
                <span class="number">2</span>
              </a>
            </div>


          </div>

        </div>
      </div>
    </div>
  </div>

  <!-- Banner -->
  <div class="site-blocks-cover" style="position: relative; height: 70vh; overflow: hidden;">
    <video autoplay muted loop playsinline
      style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;">
      <source src="/assets/video/videobg.mp4" type="video/mp4">
      Trình duyệt của bạn không hỗ trợ video.
    </video>
    <div class="container" style="position: relative; z-index: 1;">
      <div class="row">
        <div class="col-lg-7 mx-auto order-lg-2 align-self-center">
          <div class="site-block-cover-content text-center" style="color: #fff;">
            <h2 class="sub-title" style="font-size: 1.5rem;">Thuốc hiệu quả, thuốc mỗi ngày</h2>
            <h1 style="font-size: 2.5rem;">Welcome To HHT <span style="color: #5eba24;">Pharmacy</span></h1>
            <p>
              <a href="/pages/shop.html" class="btn btn-primary" style="padding: 10px 20px;">Mua ngay</a>
            </p>
          </div>
        </div>
      </div>
    </div>
    <div
      style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.4); z-index: 0;">
    </div>
  </div>


  <!-- Details -->
  <div class="site-section">
    <div class="container">
      <div class="row align-items-stretch section-overlap">
        <div class="col-md-6 col-lg-4 mb-4 mb-lg-0">
          <div class="banner-wrap bg-primary h-100">
            <a href="#" class="h-100">
              <h5>Miễn phí <br> vận chuyển</h5>
              <p>
                Chương trình miễn phí vận chuyển vẫn đang diễn ra sôi nổi!
                <strong>HHT <span style="color: #5eba24;">Pharmacy</span> không thu phí vận chuyển cho đơn hàng đầu
                  tiên.</strong>
              </p>
            </a>
          </div>
        </div>
        <div class="col-md-6 col-lg-4 mb-4 mb-lg-0">
          <div class="banner-wrap h-100">
            <a href="#" class="h-100">
              <h5>Mùa <br> Giảm giá <span style="color: rgb(255, 196, 0);">50%</span></h5>
              <p>
                Giảm giá cực sốc, ưu đãi cực hời!
                <strong>Chương trình giảm giá diễn ra liên tục dành cho khách hàng thân thiết.</strong>
              </p>
            </a>
          </div>
        </div>
        <div class="col-md-6 col-lg-4 mb-4 mb-lg-0">
          <div class="banner-wrap bg-warning h-100">
            <a href="#" class="h-100">
              <h5>Thanh toán <br> tiện lợi</h5>
              <p>
                Dễ dàng thanh toán với mọi hình thức.
              </p>
            </a>
          </div>
        </div>

      </div>
    </div>
  </div>

  <!-- Popular Products -->
  <div class="site-section">
    <div class="container">
      <div class="row">
        <div class="title-section text-center col-12">
          <h2 class="text-uppercase">Sản phẩm phổ biến</h2>
        </div>
      </div>

      <div class="row" id="popularProducts">
        <!-- Sản phẩm sẽ được chèn thông qua API -->
      </div>

      <div class="row mt-5">
        <div class="col-12 text-center">
          <a href="/pages/shop.html" class="btn btn-primary px-4 py-3">Xem tất cả</a>
        </div>
      </div>
    </div>
  </div>

  <!-- New Products -->
  <div class="site-section bg-light">
    <div class="container">
      <div class="row">
        <div class="title-section text-center col-12">
          <h2 class="text-uppercase">Sản phẩm mới</h2>
        </div>
      </div>

      <div class="row">
        <div class="col-md-12 block-3 products-wrap">
          <div class="row" id="newProducts">
            <!-- Sản phẩm mới sẽ được thêm ở đây -->
          </div>
        </div>
      </div>

    </div>
  </div>

  <!-- Feedback -->
  <div class="site-section">
    <div class="container">
      <div class="row">
        <div class="title-section text-center col-12">
          <h2 class="text-uppercase">Đánh giá từ khách hàng</h2>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12 block-3 products-wrap">
          <div class="nonloop-block-3 no-direction owl-carousel">

            <div class="testimony">
              <blockquote>
                <img src="/assets/images/feedback1.png" alt="Image" class="img-fluid w-25 mb-4 rounded-circle">
                <p>&ldquo;Sau khi dùng thuốc trong vòng một tuần, tôi cảm nhận được sự cải thiện rõ rệt. Không còn cảm
                  giác khó chịu và tình trạng sức khỏe được cải thiện đáng kể. Rất hài lòng về sản phẩm!&rdquo;</p>
              </blockquote>

              <p>&mdash; Anh Dương Trung H</p>
            </div>

            <div class="testimony">
              <blockquote>
                <img src="/assets/images/feedback2.png" alt="Image" class="img-fluid w-25 mb-4 rounded-circle">
                <p>&ldquo;Thuốc có vị dễ chịu, không đắng và không gây khó chịu khi uống. Dùng suốt một tháng nhưng tôi
                  không gặp bất kỳ tác dụng phụ nào. Sẽ tiếp tục sử dụng.
                  <br>&rdquo;
                </p>
              </blockquote>

              <p>&mdash; Anh Trần Quốc N</p>
            </div>

            <div class="testimony">
              <blockquote>
                <img src="/assets/images/feedback3.png" alt="Image" class="img-fluid w-25 mb-4 rounded-circle">
                <p>&ldquo;So với các sản phẩm tương tự, thuốc này có giá thành hợp lý mà hiệu quả rất tốt. Sử dụng đúng
                  liều lượng thì thấy hiệu quả rõ ràng. Rất phù hợp với người có thu nhập trung bình.&rdquo;</p>
              </blockquote>

              <p>&mdash; Anh Nghị Tuấn L</p>
            </div>

            <div class="testimony">
              <blockquote>
                <img src="/assets/images/feedback4.png" alt="Image" class="img-fluid w-25 mb-4 rounded-circle">
                <p>&ldquo;Thuốc được đóng gói tiện lợi, dễ mang theo bên mình. Hiệu quả đúng như mong đợi, cảm giác sức
                  khỏe cải thiện từng ngày. Khuyến nghị cho những ai đang tìm giải pháp tương tự.&rdquo;</p>
              </blockquote>

              <p>&mdash; Anh Phan Minh T</p>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- About Shop -->
  <div class="site-section bg-secondary bg-image" style="background-image: url('/assets/images/bg_2.jpg');">
    <div class="container">
      <div class="row align-items-stretch">
        <div class="col-lg-6 mb-5 mb-lg-0">
          <a href="#" class="banner-1 h-100 d-flex" style="background-image: url('/assets/images/bg_1.jpg');">
            <div class="banner-1-inner align-self-center">
              <h2>Pharma Products</h2>
              <p>HHT Pharmacy cung cấp các sản phẩm dược phẩm chất lượng cao, đa dạng từ thuốc điều
                trị bệnh, thực phẩm chức năng đến các sản phẩm chăm sóc sức khỏe. Với cam kết về an
                toàn và hiệu quả.
              </p>
            </div>
          </a>
        </div>
        <div class="col-lg-6 mb-5 mb-lg-0">
          <a href="#" class="banner-1 h-100 d-flex" style="background-image: url('/assets/images/bg_2.jpg');">
            <div class="banner-1-inner ml-auto  align-self-center">
              <h2>Đánh giá bởi chuyên gia</h2>
              <p>hương hiệu được các chuyên gia y tế đánh giá cao về độ an toàn và hiệu quả trong việc
                hỗ trợ điều trị và chăm sóc sức khỏe..
              </p>
            </div>
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="container">
      <div class="row">
        <div class="col-md-6 col-lg-3 mb-4 mb-lg-0">

          <div class="block-7">
            <h3 class="footer-heading mb-4">Thông tin</h3>
            <p>"Pharma cam kết mang đến các sản phẩm chăm sóc sức khỏe chất lượng, uy tín từ các
              thương hiệu hàng đầu. Chúng tôi cung cấp đa dạng các loại thuốc, thực phẩm chức năng, và sản phẩm hỗ trợ
              sức khỏe với đội ngũ tư vấn tận tình, chuyên nghiệp. Mục tiêu của chúng tôi là luôn đồng hành cùng sức
              khỏe của bạn và gia đình."
            </p>
          </div>

        </div>
        <div class="col-lg-3 mx-auto mb-5 mb-lg-0">
          <h3 class="footer-heading mb-4">Danh mục</h3>
          <ul class="list-unstyled" id="categoryListFooter">
            <!-- Danh mục từ API -->
          </ul>
        </div>

        <div class="col-md-6 col-lg-3">
          <div class="block-5 mb-5">
            <h3 class="footer-heading mb-4">Liên hệ</h3>
            <ul class="list-unstyled">
              <li class="address">Đại học Trà Vinh</li>
              <li class="phone"><a href="tel://379932119">+84379932119</a></li>
              <li class="email">Pharma@st.tvu.edu.vn</li>
            </ul>
          </div>


        </div>
      </div>
      <div class="row pt-5 mt-5 text-center">
        <div class="col-md-12">
          <p>
            Copyright &copy;
            <script>document.write(new Date().getFullYear());</script> All rights reserved | This website is made
            with by a group of students <a href="https://www.tvu.edu.vn/" target="_blank" class="text-primary">TVU</a>
          </p>
        </div>

      </div>
    </div>
  </footer>


  <!-- Popup Đăng nhập -->
  <div class="popup-overlay" id="loginPopup">
    <div class="popup-box">
      <span class="close-btn" onclick="closePopup('loginPopup')">&times;</span>
      <h3 style="text-align: center;">ĐĂNG NHẬP</h3>
      <hr>
      <form id="loginForm" onsubmit="loginUser(event)">
        <div class="form-group">
          <label for="email">Tên đăng nhập</label>
          <input type="text" id="email" name="email" class="form-control" required>
        </div>
        <div class="form-group mt-3">
          <label for="password">Mật khẩu</label>
          <input type="password" id="password" name="password" class="form-control" required>
        </div>
        <button type="submit" class="btn btn-primary btn-block mt-4">Đăng nhập</button>
      </form>
      <p class="mt-3">Chưa có tài khoản? <a href="#" onclick="switchPopup('loginPopup', 'registerPopup')">Đăng ký</a>
      </p>
    </div>
  </div>

  <!-- Popup Đăng ký -->
  <div class="popup-overlay" id="registerPopup">
    <div class="popup-box">
      <span class="close-btn" onclick="closePopup('registerPopup')">&times;</span>
      <h3 style="text-align: center;">ĐĂNG KÝ</h3>
      <hr>

      <!-- Bước 1: Nhập thông tin đăng ký -->
      <form id="registerForm" class="form-step-1">
        <div class="form-group mt-3">
          <label for="email">Email</label>
          <input type="email" id="email" name="email" class="form-control" required>
        </div>
        <div class="form-group mt-3">
          <label for="regPassword">Mật khẩu</label>
          <input type="password" id="regPassword" name="regPassword" class="form-control" required>
        </div>
        <div class="form-group mt-3">
          <label for="confirmPassword">Xác nhận mật khẩu</label>
          <input type="password" id="confirmPassword" name="confirmPassword" class="form-control" required>
        </div>
        <button type="button" class="btn btn-primary btn-block mt-4" onclick="registerUser()">Đăng ký</button>
      </form>

      <!-- Bước 2: Nhập OTP để xác thực -->
      <form id="otpForm" class="form-step-2" style="display: none;">
        <div class="form-group mt-3">
          <label for="otp">Mã OTP</label>
          <input type="text" id="otp" name="otp" class="form-control" placeholder="Nhập mã OTP" required>
        </div>
        <button type="button" class="btn btn-primary btn-block mt-4" onclick="verifyOtp()">Xác thực OTP</button>
      </form>

      <p class="mt-3">Đã có tài khoản? <a href="#" onclick="switchPopup('registerPopup', 'loginPopup')">Đăng nhập</a>
      </p>
    </div>
  </div>


  <script src="/assets/js/jquery-3.3.1.min.js"></script>
  <script src="/assets/js/jquery-ui.js"></script>
  <script src="/assets/js/popper.min.js"></script>
  <script src="/assets/js/bootstrap.min.js"></script>
  <script src="/assets/js/owl.carousel.min.js"></script>
  <script src="/assets/js/jquery.magnific-popup.min.js"></script>
  <script src="/assets/js/aos.js"></script>
  <script src="/assets/js/main.js"></script>
  <script src="/assets/js/nav.js"></script>
  <script src="/assets/js/footer.js"></script>
  <script src="/assets/js/login.js"></script>
  <script src="/assets/js/popup.js"></script>
  <script src="/assets/js/register.js"></script>

  <script>
    //Popular Products
    async function fetchRandomProducts() {
      try {
        const response = await fetch('https://localhost:1006/get-products');
        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);

        const products = await response.json();
        const randomProducts = products.sort(() => 0.5 - Math.random()).slice(0, 6);

        const productContainer = document.getElementById('popularProducts');

        randomProducts.forEach(product => {
          const regularPrice = new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(product.regularPrice);
          const discountPrice = product.discountPrice ? new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(product.discountPrice) : null;

          const productHtml = `
            <div class="col-sm-6 col-lg-4 text-center item mb-4">
              ${product.discountPrice ? '<span class="tag">Sale</span>' : ''}
              <a href="/pages/shop-single.html?id=${product.id}"> 
                <img src="https://localhost:1005/${product.imagePath}" alt="${product.productName}" style="width: 270px; height: 370px;">
              </a>
              <h3 class="text-dark"><a href="shop-single.html?id=${product.id}">${product.productName}</a></h3>
              <p class="price">
                ${discountPrice ? `<del>${regularPrice}</del> &mdash; ${discountPrice}` : regularPrice}
              </p>
            </div>
          `;
          productContainer.insertAdjacentHTML('beforeend', productHtml);
        });
      } catch (error) {
        console.error('Error fetching random products:', error);
      }
    }

    document.addEventListener('DOMContentLoaded', fetchRandomProducts);

    //New Products
    async function fetchNewProducts() {
      try {
        const response = await fetch('https://localhost:1006/get-products');
        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);

        const products = await response.json();

        const recentProducts = products
          .sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt))
          .slice(0, 4);

        const productContainer = document.getElementById('newProducts');
        productContainer.innerHTML = '';

        recentProducts.forEach(product => {
          const regularPrice = new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(product.regularPrice);
          const discountPrice = product.discountPrice ? new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(product.discountPrice) : null;

          const productHtml = `
            <div class="text-center item mb-4">
              <a href="/pages/shop-single.html?id=${product.id}"> 
                <img src="https://localhost:1005/${product.imagePath}" alt="${product.productName}" style="width: 270px; height: 370px;">
              </a>
              <h3 class="text-dark"><a href="/pages/shop-single.html?id=${product.id}">${product.productName}</a></h3>
              <p class="price">
                ${discountPrice ? `<del>${regularPrice}</del> &mdash; ${discountPrice}` : regularPrice}
              </p>
            </div>
          `;
          productContainer.insertAdjacentHTML('beforeend', productHtml);
        });
      } catch (error) {
        console.error('Error fetching new products:', error);
      }
    }

    document.addEventListener('DOMContentLoaded', fetchNewProducts);
  </script>
</body>

</html>